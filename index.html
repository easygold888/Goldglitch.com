<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#07070a" />
  <title>EasyGoldGlitch</title>
  <style>
    :root{
      --bg0:#050507;
      --bg1:#090910;
      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.09);
      --stroke: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.50);
      --gold1: rgba(227, 190, 120, .95);
      --gold2: rgba(197, 155, 78, .90);
      --shadow: 0 30px 80px rgba(0,0,0,.55);
      --r: 22px;
      --r2: 999px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 700px at 15% 10%, rgba(255,210,120,.10), transparent 55%),
                  radial-gradient(1200px 800px at 85% 25%, rgba(120,160,255,.10), transparent 60%),
                  radial-gradient(900px 900px at 60% 90%, rgba(255,210,120,.07), transparent 60%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      overflow-x:hidden;
    }

    /* background canvas */
    #fx {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none; /* don't block UI */
    }

    .wrap{
      position:relative;
      z-index:1;
      min-height:100%;
      padding: calc(14px + env(safe-area-inset-top)) 14px calc(28px + env(safe-area-inset-bottom));
      display:flex;
      flex-direction:column;
      gap: 18px;
    }

    /* HEADER */
    header{
      position: sticky;
      top: calc(10px + env(safe-area-inset-top));
      z-index: 20;
      display:flex;
      justify-content:center;
    }
    .topbar{
      width:min(1100px, 100%);
      display:flex;
      align-items:center;
      gap: 12px;
      padding: 12px 14px;
      border-radius: var(--r2);
      background: linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 240px;
    }
    .brand img{
      width: 34px;
      height: 34px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0,0,0,.4);
      border: 1px solid rgba(255,255,255,.12);
    }
    .brand .name{
      font-weight: 750;
      letter-spacing: .3px;
      line-height: 1.1;
    }
    .brand .tag{
      font-size: 12px;
      color: var(--muted2);
      margin-top: 2px;
    }

    nav{
      flex: 1;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      min-width: 0;
    }
    .pill{
      appearance:none;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--text);
      padding: 9px 12px;
      border-radius: var(--r2);
      cursor:pointer;
      font-weight: 650;
      font-size: 13px;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      white-space: nowrap;
    }
    .pill:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18); }
    .pill.active{ border-color: rgba(227,190,120,.35); box-shadow: 0 0 0 2px rgba(227,190,120,.10) inset; }

    .right{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .cart{
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 9px 12px;
      border-radius: var(--r2);
      border: 1px solid rgba(227,190,120,.22);
      background: linear-gradient(135deg, rgba(227,190,120,.10), rgba(255,255,255,.03));
    }
    .cart b{ color: var(--gold1); }
    .iconbtn{
      width: 38px;
      height: 38px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--text);
      cursor:pointer;
      display:grid;
      place-items:center;
      transition: transform .15s ease, background .15s ease;
    }
    .iconbtn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); }
    .burger{ display:none; }

    /* MOBILE DRAWER */
    .backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      z-index: 30;
      opacity:0; pointer-events:none;
      transition: opacity .18s ease;
    }
    .drawer{
      position: fixed;
      left: 12px;
      right: 12px;
      top: calc(12px + env(safe-area-inset-top));
      z-index: 31;
      border-radius: 26px;
      background: linear-gradient(135deg, rgba(20,20,28,.92), rgba(10,10,14,.92));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      padding: 12px;
      transform: translateY(-10px);
      opacity:0;
      pointer-events:none;
      transition: transform .18s ease, opacity .18s ease;
    }
    .drawer .row{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .drawer .pill{ flex: 1 1 auto; text-align:center; padding: 12px 12px; font-size: 14px; }

    .backdrop.open{ opacity:1; pointer-events:auto; }
    .drawer.open{ opacity:1; pointer-events:auto; transform: translateY(0); }

    /* MAIN */
    main{
      width:min(1100px, 100%);
      margin: 0 auto;
      display:flex;
      flex-direction:column;
      gap: 16px;
    }

    .hero{
      border-radius: 28px;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      padding: 22px;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      position: relative;
      overflow:hidden;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 7px 12px;
      border-radius: var(--r2);
      background: rgba(0,0,0,.30);
      border: 1px solid rgba(255,255,255,.12);
      color: var(--muted);
      font-weight: 650;
      font-size: 12px;
    }
    .badge .dot{
      width: 7px; height:7px; border-radius:50%;
      background: var(--gold1);
      box-shadow: 0 0 0 4px rgba(227,190,120,.12);
    }

    h1{
      margin: 14px 0 10px;
      font-size: clamp(34px, 6vw, 56px);
      line-height: 1.02;
      letter-spacing: -0.8px;
    }
    .sub{
      margin: 0 0 16px;
      color: var(--muted);
      font-size: 16px;
      max-width: 52ch;
    }

    .cta{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      margin-top: 6px;
    }
    .btn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 16px;
      cursor:pointer;
      font-weight: 750;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18); }
    .btn.primary{
      border-color: rgba(227,190,120,.28);
      background: linear-gradient(135deg, rgba(227,190,120,.18), rgba(255,255,255,.03));
    }

    .metaRow{
      display:flex;
      gap: 18px;
      flex-wrap:wrap;
      margin-top: 14px;
      color: var(--muted2);
      font-size: 13px;
    }
    .metaRow b{ color: var(--gold1); font-weight: 800; }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }

    .card{
      grid-column: span 6;
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(135deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      padding: 16px;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      display:flex;
      flex-direction:column;
      gap: 12px;
      position:relative;
      overflow:hidden;
    }
    .card h3{ margin:0; font-size: 18px; letter-spacing: -.2px; }
    .card p{ margin:0; color: var(--muted); font-size: 13px; line-height: 1.45; }
    .rowBetween{ display:flex; justify-content:space-between; align-items:baseline; gap: 10px; }
    .price{ font-size: 18px; font-weight: 900; color: var(--gold1); }
    .chips{ display:flex; gap: 8px; flex-wrap:wrap; }
    .chip{
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.75);
      font-size: 12px;
      font-weight: 650;
    }

    .cardActions{ display:flex; gap: 10px; flex-wrap:wrap; margin-top: 4px; }
    .tiny{
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 800;
      font-size: 13px;
    }
    .tiny.ghost{ background: rgba(255,255,255,.04); }
    .tiny.added{ border-color: rgba(227,190,120,.30); box-shadow: 0 0 0 2px rgba(227,190,120,.10) inset; }

    /* Sections */
    section{ display:none; }
    section.active{ display:block; }

    /* Modal */
    .modalWrap{
      position: fixed; inset:0;
      z-index: 40;
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding: 12px 12px calc(12px + env(safe-area-inset-bottom));
    }
    .modalWrap.open{ display:flex; }
    .modal{
      width:min(760px, 100%);
      max-height: 88vh;
      overflow:auto;
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.12);
      background: linear-gradient(135deg, rgba(20,20,28,.92), rgba(10,10,14,.92));
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      padding: 14px;
    }
    .modalHead{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 6px 4px 10px;
    }
    .modalHead h4{ margin:0; font-size: 16px; letter-spacing: -.2px; }
    .close{
      width: 40px; height: 40px; border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--text);
      cursor:pointer;
    }

    .modalGrid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
    }
    .panel{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding: 14px;
    }
    .panel h5{ margin:0 0 8px; font-size: 13px; color: rgba(255,255,255,.82); }
    .panel .muted{ color: var(--muted); font-size: 13px; }

    .field{
      display:flex; flex-direction:column; gap: 6px;
      margin-top: 10px;
    }
    .field label{ font-size: 12px; color: rgba(255,255,255,.72); font-weight: 700; }
    .field input, .field textarea{
      width: 100%;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.30);
      color: var(--text);
      padding: 12px 12px;
      font-size: 14px;
      outline:none;
    }
    .field textarea{ min-height: 84px; resize: vertical; }

    .inline{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-top: 10px;
    }
    .qr{
      width: 160px; height:160px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.20);
      object-fit: cover;
    }
    .addr{
      flex: 1;
      min-width: 200px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: rgba(255,255,255,.80);
      word-break: break-all;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
    }

    .check{
      display:flex; align-items:flex-start; gap: 10px;
      margin-top: 12px;
      color: rgba(255,255,255,.75);
      font-size: 12px;
      line-height: 1.35;
    }
    .check input{ margin-top: 2px; }

    .toast{
      position: fixed;
      left: 12px; right: 12px;
      bottom: calc(12px + env(safe-area-inset-bottom));
      z-index: 60;
      display:none;
      justify-content:center;
      pointer-events:none;
    }
    .toast .t{
      width:min(520px, 100%);
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.55);
      color: rgba(255,255,255,.88);
      padding: 10px 12px;
      font-size: 12px;
      font-weight: 700;
      text-align:center;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }

    /* Responsive */
    @media (max-width: 820px){
      .brand{ min-width: 0; }
      nav{ justify-content:flex-end; }
      .grid{ gap: 10px; }
      .card{ grid-column: span 12; }
      .modalGrid{ grid-template-columns: 1fr; }
    }
    @media (max-width: 520px){
      nav, .cart { display:none; }
      .burger{ display:grid; }
      .topbar{ padding: 10px 12px; }
      .brand img{ width: 32px; height: 32px; }
      .hero{ padding: 18px; border-radius: 26px; }
      .btn{ width: 100%; }
    }
  </style>
</head>

<body>
  <canvas id="fx"></canvas>

  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand">
          <img id="brandLogo" src="Logo.png" alt="EasyGoldGlitch logo"
               onerror="this.onerror=null;this.src='logo.png';" />
          <div>
            <div class="name">EasyGoldGlitch</div>
            <div class="tag">Stop trading. Start printing.</div>
          </div>
        </div>

        <nav aria-label="Primary">
          <button class="pill active" data-tab="home">Home</button>
          <button class="pill" data-tab="glitches">Glitches</button>
          <button class="pill" data-tab="philosophy">Philosophy</button>
          <button class="pill" data-tab="terms">Terms</button>
        </nav>

        <div class="right">
          <button class="iconbtn burger" id="menuBtn" aria-label="Open menu">â˜°</button>
          <button class="iconbtn" id="goCheckout" aria-label="Checkout">ðŸ§¾</button>
          <div class="cart" title="Selected items">
            <span>Cart</span>
            <b id="cartCount">0</b>
          </div>
        </div>
      </div>
    </header>

    <!-- mobile drawer -->
    <div class="backdrop" id="backdrop"></div>
    <div class="drawer" id="drawer" role="dialog" aria-modal="true" aria-label="Menu">
      <div class="row">
        <button class="pill" data-tab="home">Home</button>
        <button class="pill" data-tab="glitches">Glitches</button>
        <button class="pill" data-tab="philosophy">Philosophy</button>
        <button class="pill" data-tab="terms">Terms</button>
        <button class="pill" id="drawerCheckout">Checkout</button>
      </div>
    </div>

    <main>
      <section id="home" class="active">
        <div class="hero">
          <div class="badge"><span class="dot"></span> Crypto-native â€¢ No sign-up</div>
          <h1>Stop trading.<br/>Start printing.</h1>
          <p class="sub">Choose a glitch. Pay in ETH. Get it delivered.</p>

          <div class="cta">
            <button class="btn primary" data-jump="glitches">Browse glitches</button>
            <button class="btn" id="openCheckout2">Checkout</button>
          </div>

          <div class="metaRow">
            <div>ETH spot: <b id="ethSpot">$â€”</b></div>
            <div>Weekly high (used): <b id="ethWeekHigh">$â€”</b></div>
            <div>Refresh: <span id="ethStatus">loadingâ€¦</span></div>
          </div>
        </div>

        <div class="grid" style="margin-top:12px">
          <div class="card">
            <div class="rowBetween">
              <h3>Fast picks</h3>
              <div class="chip">Low text</div>
            </div>
            <p>Tap a card â†’ add to cart â†’ pay in ETH.</p>
          </div>
          <div class="card">
            <div class="rowBetween">
              <h3>Pricing</h3>
              <div class="chip">ETH = weekly high</div>
            </div>
            <p>USD converts to ETH using the weekly high snapshot.</p>
          </div>
        </div>
      </section>

      <section id="glitches">
        <div class="grid">
          <div class="card" data-sku="g1" data-usd="50" data-title="Glitch 1.0 â€” Simple Sample" data-term="Demo â€¢ 2 months">
            <div class="rowBetween">
              <h3>Glitch 1.0 â€” Simple Sample</h3>
              <div class="price">$50</div>
            </div>
            <div class="chips">
              <span class="chip">Demo â€¢ 2 months</span>
              <span class="chip">1 trade at a time</span>
              <span class="chip">Low noise</span>
            </div>
            <p>Clean execution. Minimal exposure.</p>
            <div class="cardActions">
              <button class="btn tiny ghost" data-view="g1">View</button>
              <button class="btn tiny primary" data-add="g1">Add</button>
            </div>
          </div>

          <div class="card" data-sku="g2" data-usd="70" data-title="Glitch 2.0 â€” Wealth Builder" data-term="Demo â€¢ 2 months">
            <div class="rowBetween">
              <h3>Glitch 2.0 â€” Wealth Builder</h3>
              <div class="price">$70</div>
            </div>
            <div class="chips">
              <span class="chip">Demo â€¢ 2 months</span>
              <span class="chip">Buy & hold</span>
              <span class="chip">One re-buy</span>
            </div>
            <p>Hold the slope. Add once on weakness.</p>
            <div class="cardActions">
              <button class="btn tiny ghost" data-view="g2">View</button>
              <button class="btn tiny primary" data-add="g2">Add</button>
            </div>
          </div>

          <div class="card" data-sku="g3" data-usd="500" data-title="Glitch Pro â€” Fâ˜…ck Gold" data-term="Pro â€¢ lifetime">
            <div class="rowBetween">
              <h3>Glitch Pro â€” Fâ˜…ck Gold</h3>
              <div class="price">$500</div>
            </div>
            <div class="chips">
              <span class="chip">Pro â€¢ lifetime</span>
              <span class="chip">One-time payment</span>
              <span class="chip">Full stack</span>
            </div>
            <p>Higher aggression. Full control.</p>
            <div class="cardActions">
              <button class="btn tiny ghost" data-view="g3">View</button>
              <button class="btn tiny primary" data-add="g3">Add</button>
            </div>
          </div>

          <div class="card" data-sku="g4" data-usd="150" data-title="Little Glitcher" data-term="Tool â€¢ demo extender">
            <div class="rowBetween">
              <h3>Little Glitcher</h3>
              <div class="price">$150</div>
            </div>
            <div class="chips">
              <span class="chip">Tool</span>
              <span class="chip">Demo extender</span>
              <span class="chip">Up to 10 terminals</span>
            </div>
            <p>Copytrading + demo-life extender.</p>
            <div class="cardActions">
              <button class="btn tiny ghost" data-view="g4">View</button>
              <button class="btn tiny primary" data-add="g4">Add</button>
            </div>
          </div>
        </div>
      </section>

      <section id="philosophy">
        <div class="hero">
          <div class="badge"><span class="dot"></span> Philosophy</div>
          <h1>Algorithms hunt humans.</h1>
          <p class="sub">
            The creator noticed most flow wasnâ€™t discretionary anymore â€” it was systematic.
            So we stopped guessing and started exploiting.
          </p>
          <div class="metaRow">
            <div><b>Less noise.</b> More edge.</div>
            <div><b>No sign-up.</b> Just pay & verify.</div>
          </div>
        </div>
      </section>

      <section id="terms">
        <div class="hero">
          <div class="badge"><span class="dot"></span> Terms</div>
          <h1>Risk is real.</h1>
          <p class="sub">
            Trading is high-risk. Past performance does not guarantee future results.
            You can lose part or all of your capital. No refunds.
          </p>
          <p class="sub" style="margin-top:10px">
            Demo glitches run for <b>2 months</b>. Little Glitcher may extend demo behavior (tooling),
            and requires keeping your MT5 terminal and executable active at all times.
          </p>
        </div>
      </section>
    </main>

    <!-- Checkout Modal -->
    <div class="modalWrap" id="checkoutWrap" role="dialog" aria-modal="true" aria-label="Checkout">
      <div class="modal">
        <div class="modalHead">
          <h4>Checkout</h4>
          <button class="close" id="closeCheckout" aria-label="Close">âœ•</button>
        </div>

        <div class="modalGrid">
          <div class="panel">
            <h5>Cart</h5>
            <div id="cartLines" class="muted">No items yet.</div>

            <div class="inline" style="margin-top:12px">
              <div class="chip">Total: <b id="totalUsd">$0</b></div>
              <div class="chip">Pay in ETH: <b id="totalEth">â€”</b></div>
              <div class="chip">ETH weekly high: <b id="ethWH2">$â€”</b></div>
            </div>

            <div class="field">
              <label>Email (delivery)</label>
              <input id="email" type="email" placeholder="you@domain.com" autocomplete="email" />
            </div>

            <div class="field">
              <label>TxHash (after sending ETH)</label>
              <input id="txhash" type="text" placeholder="0x..." autocomplete="off" spellcheck="false" />
            </div>

            <div class="check">
              <input id="agree" type="checkbox" />
              <div>I agree to the Terms and acknowledge financial risk.</div>
            </div>

            <div class="cta" style="margin-top:12px">
              <button class="btn primary" id="copyAddress">Copy address</button>
              <button class="btn" id="verifyBtn">Verify payment</button>
            </div>

            <p class="sub" style="margin-top:12px; font-size:12px; color: rgba(255,255,255,.55)">
              (MVP) Verify is UI-only for now. Backend TxHash validation comes next.
            </p>
          </div>

          <div class="panel">
            <h5>Send ETH</h5>
            <div class="inline">
              <img class="qr" src="wallet.png" alt="Wallet QR" />
              <div class="addr" id="walletAddr">Loading addressâ€¦</div>
            </div>
            <div class="field">
              <label>Tip</label>
              <textarea readonly>After sending, paste your TxHash and hit Verify. Keep your receipt.</textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast"><div class="t" id="toastText"></div></div>
  </div>

  <script>
    // -----------------------------
    // Tabs + mobile drawer
    // -----------------------------
    const tabs = [...document.querySelectorAll('[data-tab]')];
    const sections = {
      home: document.getElementById('home'),
      glitches: document.getElementById('glitches'),
      philosophy: document.getElementById('philosophy'),
      terms: document.getElementById('terms'),
    };

    function setTab(name){
      Object.keys(sections).forEach(k => sections[k].classList.toggle('active', k===name));
      document.querySelectorAll('nav .pill').forEach(b => b.classList.toggle('active', b.dataset.tab===name));
      closeDrawer();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    tabs.forEach(btn => btn.addEventListener('click', () => setTab(btn.dataset.tab)));
    document.querySelectorAll('[data-jump="glitches"]').forEach(b => b.addEventListener('click', () => setTab('glitches')));

    const backdrop = document.getElementById('backdrop');
    const drawer = document.getElementById('drawer');
    const menuBtn = document.getElementById('menuBtn');

    function openDrawer(){ backdrop.classList.add('open'); drawer.classList.add('open'); }
    function closeDrawer(){ backdrop.classList.remove('open'); drawer.classList.remove('open'); }

    menuBtn?.addEventListener('click', openDrawer);
    backdrop.addEventListener('click', closeDrawer);

    // -----------------------------
    // Checkout modal
    // -----------------------------
    const checkoutWrap = document.getElementById('checkoutWrap');
    const goCheckout = document.getElementById('goCheckout');
    const openCheckout2 = document.getElementById('openCheckout2');
    const drawerCheckout = document.getElementById('drawerCheckout');
    const closeCheckout = document.getElementById('closeCheckout');

    function openCheckout(){ checkoutWrap.classList.add('open'); }
    function closeCheckoutModal(){ checkoutWrap.classList.remove('open'); }

    [goCheckout, openCheckout2, drawerCheckout].forEach(el => el && el.addEventListener('click', () => { openCheckout(); closeDrawer(); }));

    closeCheckout.addEventListener('click', closeCheckoutModal);
    checkoutWrap.addEventListener('click', (e) => { if(e.target === checkoutWrap) closeCheckoutModal(); });

    // -----------------------------
    // Wallet address loader
    // -----------------------------
    const walletAddrEl = document.getElementById('walletAddr');
    const addrCandidates = ['Address.txt', 'address.txt'];

    async function loadAddress(){
      for (const p of addrCandidates){
        try{
          const r = await fetch(p, { cache: 'no-store' });
          if(r.ok){
            const t = (await r.text()).trim();
            if(t) return t;
          }
        }catch{}
      }
      return '';
    }

    let WALLET_ADDRESS = '';
    loadAddress().then(a => {
      WALLET_ADDRESS = a;
      walletAddrEl.textContent = a || 'Address file not found.';
    });

    document.getElementById('copyAddress').addEventListener('click', async () => {
      if(!WALLET_ADDRESS) return toast('Address not loaded yet.');
      try{
        await navigator.clipboard.writeText(WALLET_ADDRESS);
        toast('Address copied.');
      }catch{
        toast('Copy failed. Tap & hold to copy.');
      }
    });

    // -----------------------------
    // Cart + pricing (USD -> ETH using weekly high)
    // -----------------------------
    const products = {
      g1: { usd: 50, title: 'Glitch 1.0 â€” Simple Sample' },
      g2: { usd: 70, title: 'Glitch 2.0 â€” Wealth Builder' },
      g3: { usd: 500, title: 'Glitch Pro â€” Fâ˜…ck Gold' },
      g4: { usd: 150, title: 'Little Glitcher' },
    };

    const cart = new Set();
    const cartCountEl = document.getElementById('cartCount');
    const cartLinesEl = document.getElementById('cartLines');
    const totalUsdEl = document.getElementById('totalUsd');
    const totalEthEl = document.getElementById('totalEth');

    function fmtUsd(n){ return '$' + n.toFixed(0); }
    function fmtEth(n){
      if(!isFinite(n)) return 'â€”';
      if(n === 0) return '0';
      return n.toFixed(n < 0.01 ? 5 : 4);
    }

    let ethSpot = null;
    let ethWeekHigh = null;

    function computeEth(usd){
      if(!ethWeekHigh) return null;
      return usd / ethWeekHigh;
    }

    function renderCart(){
      cartCountEl.textContent = cart.size;
      if(cart.size === 0){
        cartLinesEl.textContent = 'No items yet.';
        totalUsdEl.textContent = '$0';
        totalEthEl.textContent = 'â€”';
        return;
      }
      let total = 0;
      const lines = [];
      cart.forEach(sku => {
        const p = products[sku];
        total += p.usd;
        lines.push(`â€¢ ${p.title} â€” $${p.usd}`);
      });
      cartLinesEl.innerHTML = lines.map(x => `<div class="muted">${x}</div>`).join('');
      totalUsdEl.textContent = fmtUsd(total);
      const e = computeEth(total);
      totalEthEl.textContent = e == null ? 'â€”' : (fmtEth(e) + ' ETH');
    }

    function toggleAddBtn(sku){
      document.querySelectorAll(`[data-add="${sku}"]`).forEach(btn=>{
        const added = cart.has(sku);
        btn.textContent = added ? 'Added' : 'Add';
        btn.classList.toggle('added', added);
      });
    }

    document.querySelectorAll('[data-add]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const sku = btn.dataset.add;
        if(cart.has(sku)) cart.delete(sku);
        else cart.add(sku);
        toggleAddBtn(sku);
        renderCart();
        toast(cart.has(sku) ? 'Added to cart.' : 'Removed.');
      });
    });

    // View buttons (minimal)
    document.querySelectorAll('[data-view]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const sku = btn.dataset.view;
        const p = products[sku];
        toast(p ? p.title : 'Glitch');
      });
    });

    // -----------------------------
    // ETH quote loader (tries /api/eth-quote first, then direct)
    // -----------------------------
    const ethSpotEl = document.getElementById('ethSpot');
    const ethWeekHighEl = document.getElementById('ethWeekHigh');
    const ethWH2 = document.getElementById('ethWH2');
    const ethStatusEl = document.getElementById('ethStatus');

    async function fetchJson(url){
      const r = await fetch(url, { cache: 'no-store' });
      if(!r.ok) throw new Error('HTTP ' + r.status);
      return r.json();
    }

    function setEthUI(){
      ethSpotEl.textContent = ethSpot ? ('$' + ethSpot.toFixed(2)) : '$â€”';
      ethWeekHighEl.textContent = ethWeekHigh ? ('$' + ethWeekHigh.toFixed(2)) : '$â€”';
      ethWH2.textContent = ethWeekHigh ? ('$' + ethWeekHigh.toFixed(2)) : '$â€”';
      renderCart();
    }

    async function loadEthQuote(){
      ethStatusEl.textContent = 'loadingâ€¦';
      try{
        // Preferred: your edge function
        const data = await fetchJson('/api/eth-quote');
        ethSpot = data.usdSpot;
        ethWeekHigh = data.usdWeeklyHigh;
        ethStatusEl.textContent = 'live';
        setEthUI();
        return;
      }catch(e){
        // Fallback: direct market_chart (may fail due to CORS/rate-limits)
      }

      try{
        const chart = await fetchJson('https://api.coingecko.com/api/v3/coins/ethereum/market_chart?vs_currency=usd&days=7&interval=hourly');
        const prices = chart?.prices || [];
        if(!prices.length) throw new Error('no prices');
        let max = -Infinity;
        for(const pt of prices) max = Math.max(max, pt[1]);
        ethWeekHigh = max;
        ethSpot = prices[prices.length-1][1];
        ethStatusEl.textContent = 'fallback';
        setEthUI();
      }catch(err){
        ethStatusEl.textContent = 'tap to retry';
        toast('ETH quote failed. Tap to retry.');
      }
    }

    // Tap anywhere to retry if needed
    window.addEventListener('pointerdown', () => {
      if(ethStatusEl.textContent.includes('retry')) loadEthQuote();
    }, { passive: true });

    loadEthQuote();
    setInterval(loadEthQuote, 60_000);

    // -----------------------------
    // Verify button (UI-only for MVP)
    // -----------------------------
    document.getElementById('verifyBtn').addEventListener('click', ()=>{
      const email = document.getElementById('email').value.trim();
      const tx = document.getElementById('txhash').value.trim();
      const agree = document.getElementById('agree').checked;
      if(!cart.size) return toast('Pick a glitch first.');
      if(!email) return toast('Email required.');
      if(!agree) return toast('Please accept Terms.');
      if(!/^0x[a-fA-F0-9]{64}$/.test(tx)) return toast('TxHash looks wrong.');
      toast('Received. Verification backend is next.');
    });

    // -----------------------------
    // Toasts (minimal dopamine pings)
    // -----------------------------
    const toastEl = document.getElementById('toast');
    const toastText = document.getElementById('toastText');
    let toastT = null;

    function toast(msg){
      clearTimeout(toastT);
      toastText.textContent = msg;
      toastEl.style.display = 'flex';
      toastT = setTimeout(()=> toastEl.style.display='none', 2600);
    }

    const pings = [
      'âš¡ Simple Sample just sold.',
      'ðŸŸ¡ Wealth Builder added to cart.',
      'âœ¨ Pro unlocks: lifetime.',
      'ðŸ§¾ Tap Checkout when ready.'
    ];
    function schedulePing(){
      const t = 18000 + Math.random()*18000;
      setTimeout(()=>{
        toast(pings[Math.floor(Math.random()*pings.length)]);
        schedulePing();
      }, t);
    }
    schedulePing();

    // -----------------------------
    // Particle field: random + clustering + tap burst
    // -----------------------------
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d', { alpha: true });

    const isMobile = matchMedia('(max-width: 640px)').matches;
    const DPR = Math.min(2, window.devicePixelRatio || 1);

    let W=0,H=0;
    function resize(){
      W = Math.floor(innerWidth * DPR);
      H = Math.floor(innerHeight * DPR);
      canvas.width = W;
      canvas.height = H;
    }
    addEventListener('resize', resize, { passive:true });
    resize();

    const MAX = isMobile ? 70 : 140;
    const ATTR = isMobile ? 3 : 5;

    const attractors = [];
    function mkAttractor(x, y, lifeMs = 0){
      return {
        x, y,
        vx: (Math.random()-.5)*0.18*DPR,
        vy: (Math.random()-.5)*0.18*DPR,
        s: (0.45 + Math.random()*0.65) * DPR,
        life: lifeMs,
        born: performance.now()
      };
    }
    for(let i=0;i<ATTR;i++){
      attractors.push(mkAttractor(Math.random()*W, Math.random()*H));
    }

    const particles = [];
    function spawn(n, x, y){
      for(let i=0;i<n;i++){
        const a = attractors[Math.floor(Math.random()*attractors.length)];
        particles.push({
          x: x + (Math.random()-.5)*20*DPR,
          y: y + (Math.random()-.5)*20*DPR,
          vx:(Math.random()-.5)*0.55*DPR,
          vy:(Math.random()-.5)*0.55*DPR,
          r: (1.2 + Math.random()*2.2)*DPR,
          a,
          wob: Math.random()*Math.PI*2,
          glow: Math.random()*0.9 + 0.1,
          t: Math.random(),
        });
      }
      while(particles.length > MAX) particles.shift();
    }
    spawn(MAX, W*0.5, H*0.5);

    // spatial grid for mild separation
    const cell = 80 * DPR;
    function key(cx,cy){ return (cx<<16) ^ cy; }

    function step(now){
      // clear
      ctx.clearRect(0,0,W,H);

      // move attractors (drifty)
      for(const a of attractors){
        a.x += a.vx; a.y += a.vy;
        if(a.x<0||a.x>W) a.vx*=-1;
        if(a.y<0||a.y>H) a.vy*=-1;
      }
      // prune temporary attractors
      for(let i=attractors.length-1;i>=0;i--){
        const a = attractors[i];
        if(a.life>0 && (now - a.born) > a.life){
          attractors.splice(i,1);
        }
      }
      // keep baseline attractors count
      while(attractors.length < ATTR) attractors.push(mkAttractor(Math.random()*W, Math.random()*H));

      // grid build
      const grid = new Map();
      for(const p of particles){
        const cx = (p.x/cell)|0, cy = (p.y/cell)|0;
        const k = key(cx,cy);
        if(!grid.has(k)) grid.set(k, []);
        grid.get(k).push(p);
      }

      // draw pass
      for(const p of particles){
        // random wander
        p.wob += 0.018;
        const wx = Math.cos(p.wob)*0.03*DPR;
        const wy = Math.sin(p.wob)*0.03*DPR;

        // cohesion to assigned attractor (clustering)
        const ax = p.a.x - p.x;
        const ay = p.a.y - p.y;
        const dist = Math.hypot(ax,ay) + 0.0001;
        const pull = Math.min(0.08*DPR, (p.a.s / dist) * 0.9);

        p.vx += (ax/dist)*pull + wx;
        p.vy += (ay/dist)*pull + wy;

        // mild separation from neighbors
        const cx = (p.x/cell)|0, cy = (p.y/cell)|0;
        let rx=0, ry=0;
        for(let gx=-1;gx<=1;gx++){
          for(let gy=-1;gy<=1;gy++){
            const k = key(cx+gx, cy+gy);
            const bucket = grid.get(k);
            if(!bucket) continue;
            for(const q of bucket){
              if(q===p) continue;
              const dx = p.x - q.x, dy = p.y - q.y;
              const d2 = dx*dx + dy*dy;
              if(d2 < (28*DPR)*(28*DPR)){
                const inv = 1/(d2+40);
                rx += dx*inv;
                ry += dy*inv;
              }
            }
          }
        }
        p.vx += rx*0.55;
        p.vy += ry*0.55;

        // damping
        p.vx *= 0.985;
        p.vy *= 0.985;

        // integrate
        p.x += p.vx;
        p.y += p.vy;

        // wrap
        if(p.x < -30) p.x = W+30;
        if(p.x > W+30) p.x = -30;
        if(p.y < -30) p.y = H+30;
        if(p.y > H+30) p.y = -30;

        // color mix (gold/white)
        const goldBias = 0.55 + 0.45*Math.sin(p.wob*0.7 + p.t*6.0);
        const a1 = 0.10 + 0.20*p.glow;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fillStyle = goldBias > 0.55
          ? `rgba(227,190,120,${a1})`
          : `rgba(255,255,255,${a1})`;
        ctx.fill();
      }

      // subtle connecting lines inside clusters
      ctx.save();
      ctx.globalAlpha = 0.12;
      ctx.lineWidth = 1 * DPR;
      for(const p of particles){
        // connect to attractor (short range only)
        const dx = p.a.x - p.x, dy = p.a.y - p.y;
        const d = Math.hypot(dx,dy);
        if(d < 220*DPR){
          ctx.beginPath();
          ctx.moveTo(p.x, p.y);
          ctx.lineTo(p.a.x, p.a.y);
          ctx.strokeStyle = 'rgba(227,190,120,0.08)';
          ctx.stroke();
        }
      }
      ctx.restore();

      requestAnimationFrame(step);
    }
    requestAnimationFrame(step);

    // Tap burst: add temporary attractor + particles
    window.addEventListener('pointerdown', (e)=>{
      const x = e.clientX * DPR;
      const y = e.clientY * DPR;
      attractors.push(mkAttractor(x, y, 2800)); // temp attractor 2.8s
      spawn(isMobile ? 10 : 16, x, y);
    }, { passive:true });
  </script>
</body>
</html>
