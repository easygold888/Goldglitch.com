<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>EasyGoldGlitch — Stop trading. Start printing.</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#050608;
      --bg1:#0b0d11;
      --glass: rgba(18, 20, 26, 0.52);
      --glass2: rgba(18, 20, 26, 0.36);
      --stroke: rgba(255,255,255,0.10);
      --stroke2: rgba(255,255,255,0.08);
      --txt: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.62);
      --muted2: rgba(255,255,255,0.45);
      --gold:#D4AF37;
      --gold2:#FFD36A;
      --shadow: rgba(0,0,0,0.55);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Space Grotesk", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--txt);
      background: radial-gradient(1200px 900px at 70% -10%, rgba(212,175,55,0.10), transparent 55%),
                  radial-gradient(1000px 900px at 10% 20%, rgba(255,211,106,0.06), transparent 60%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* FX canvas */
    #fx{
      position:fixed; inset:0;
      width:100vw; height:100vh;
      z-index:0;
      pointer-events:none;
    }

    .app{
      position:relative;
      z-index:1;
      min-height:100vh;
      padding: 22px 16px 56px;
    }

    .container{
      width:min(1100px, calc(100vw - 32px));
      margin:0 auto;
    }

    .glass{
      background: var(--glass);
      border: 1px solid var(--stroke);
      box-shadow: 0 18px 60px var(--shadow);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border-radius: var(--radius);
    }

    .glass.soft{
      background: var(--glass2);
      border: 1px solid var(--stroke2);
      box-shadow: 0 14px 48px rgba(0,0,0,0.45);
    }

    /* Header */
    .header{
      position:sticky;
      top: 14px;
      z-index: 5;
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }

    .brand{
      display:flex; align-items:center; gap: 10px;
      min-width: 180px;
    }
    .brand img{
      width: 34px; height: 34px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.10);
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    .brand .name{
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .brand .tag{
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .nav{
      display:flex;
      align-items:center;
      gap: 8px;
      padding: 6px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .nav button{
      appearance:none;
      border:0;
      padding: 10px 14px;
      border-radius: 999px;
      background: transparent;
      color: var(--muted);
      font-weight: 600;
      cursor:pointer;
      transition: 160ms ease;
      letter-spacing: 0.1px;
      white-space:nowrap;
    }
    .nav button.active{
      color: var(--txt);
      background: rgba(255,255,255,0.09);
      box-shadow: inset 0 0 0 1px rgba(212,175,55,0.22);
    }
    .nav button:hover{ color: var(--txt); background: rgba(255,255,255,0.07); }

    .quote{
      display:flex;
      align-items:flex-end;
      gap: 10px;
      min-width: 220px;
      justify-content:flex-end;
      text-align:right;
    }
    .quote .big{
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.2px;
    }
    .quote .sub{
      font-size: 12px;
      color: var(--muted2);
      margin-top: 2px;
    }
    .quote .pill{
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
    }

    /* Views */
    .views{ margin-top: 18px; }
    .view{ display:none; }
    .view.active{ display:block; animation: fadeIn 220ms ease; }

    @keyframes fadeIn { from{opacity:0; transform: translateY(6px);} to{opacity:1; transform: translateY(0);} }

    /* Hero */
    .hero{
      padding: 26px;
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 18px;
      overflow:hidden;
    }

    .kicker{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(212,175,55,0.08);
      border: 1px solid rgba(212,175,55,0.18);
      color: rgba(255,255,255,0.88);
      font-size: 12px;
      width: fit-content;
    }

    h1{
      font-family: "Cinzel", serif;
      font-size: clamp(34px, 4.2vw, 56px);
      line-height: 0.98;
      margin: 14px 0 10px;
      letter-spacing: -0.5px;
    }
    .lead{
      color: var(--muted);
      font-size: 16px;
      line-height: 1.45;
      max-width: 54ch;
      margin: 0 0 18px;
    }

    .actions{ display:flex; gap: 10px; flex-wrap:wrap; }
    .btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.07);
      color: var(--txt);
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 700;
      cursor:pointer;
      transition: 160ms ease;
      box-shadow: 0 18px 50px rgba(0,0,0,0.25);
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.09); }
    .btn:active{ transform: translateY(0px); }
    .btn.gold{
      border-color: rgba(212,175,55,0.38);
      background: linear-gradient(180deg, rgba(212,175,55,0.18), rgba(212,175,55,0.08));
    }
    .btn.ghost{
      background: transparent;
    }

    .rightCard{
      padding: 18px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      justify-content:space-between;
    }
    .statRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .stat{
      padding: 14px;
      border-radius: 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .stat .k{ color: var(--muted2); font-size: 12px; }
    .stat .v{ font-weight: 800; margin-top: 6px; font-size: 16px; }
    .stat .v .gold{ color: var(--gold2); }

    /* Exploits grid */
    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }
    .card{
      padding: 16px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      min-height: 180px;
    }
    .card h3{
      margin:0;
      font-size: 16px;
      letter-spacing: 0.2px;
    }
    .meta{
      display:flex;
      gap: 8px;
      flex-wrap:wrap;
      color: var(--muted2);
      font-size: 12px;
    }
    .chip{
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .priceRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-top: 4px;
    }
    .usd{
      font-size: 22px;
      font-weight: 900;
      color: rgba(255,255,255,0.92);
    }
    .usd span{
      color: var(--gold2);
      font-size: 14px;
      font-weight: 800;
      margin-left: 6px;
    }
    .mini{
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
      margin: 0;
    }

    /* Terms */
    .terms{
      padding: 18px;
      line-height: 1.55;
      color: var(--muted);
      font-size: 14px;
    }
    .terms h2{
      margin: 0 0 10px;
      color: var(--txt);
      font-size: 18px;
    }
    .terms strong{ color: rgba(255,255,255,0.88); }

    /* Modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,0.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 20;
    }
    .overlay.show{ display:flex; }
    .modal{
      width: min(860px, 96vw);
      border-radius: 22px;
      overflow:hidden;
    }
    .modalHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .modalTitle{
      font-weight: 900;
      letter-spacing: 0.2px;
    }
    .close{
      appearance:none;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--txt);
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
    }
    .modalBody{
      padding: 16px;
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 14px;
    }
    .box{
      padding: 14px;
      border-radius: 18px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .box h4{ margin: 0 0 8px; font-size: 14px; }
    .box p{ margin: 0; color: var(--muted); font-size: 13px; line-height: 1.5; }

    .checkoutGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .payRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .field label{
      display:block;
      font-size: 12px;
      color: var(--muted2);
      margin-bottom: 6px;
    }
    .field input{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
      color: var(--txt);
      outline:none;
    }
    .field input:focus{
      border-color: rgba(212,175,55,0.35);
      box-shadow: 0 0 0 3px rgba(212,175,55,0.12);
    }

    .qrWrap{
      display:flex;
      gap: 12px;
      align-items:center;
    }
    .qr{
      width: 132px; height: 132px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      object-fit: cover;
    }
    .addr{
      font-size: 12px;
      color: rgba(255,255,255,0.82);
      word-break: break-all;
      line-height: 1.35;
    }
    .copyBtn{
      margin-top: 8px;
      padding: 9px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--txt);
      cursor:pointer;
      font-weight: 700;
      width: fit-content;
    }

    .check{
      display:flex; gap: 10px; align-items:flex-start;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
    }
    .check input{ margin-top: 3px; }

    /* Toast */
    .toast{
      position:fixed;
      right: 16px;
      bottom: 16px;
      z-index: 30;
      display:none;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(18,20,26,0.78);
      border: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 18px 60px rgba(0,0,0,0.55);
      color: rgba(255,255,255,0.9);
      max-width: min(360px, calc(100vw - 32px));
      font-size: 13px;
    }
    .toast.show{ display:block; animation: pop 220ms ease; }
    @keyframes pop { from{opacity:0; transform: translateY(10px);} to{opacity:1; transform: translateY(0);} }

    /* Mobile */
    @media (max-width: 940px){
      .hero{ grid-template-columns: 1fr; }
      .quote{ display:none; }
      .grid{ grid-template-columns: 1fr; }
      .modalBody{ grid-template-columns: 1fr; }
      .payRow{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <canvas id="fx"></canvas>

  <div class="app">
    <div class="container">
      <header class="header glass">
        <div class="brand">
          <img id="logoImg" src="logo.png" alt="EasyGoldGlitch logo" />
          <div>
            <div class="name">EasyGoldGlitch</div>
            <div class="tag">Crypto-native · No sign-up</div>
          </div>
        </div>

        <nav class="nav" aria-label="Primary">
          <button class="active" data-nav="home">Home</button>
          <button data-nav="exploits">Exploits</button>
          <button data-nav="terms">Terms</button>
        </nav>

        <div class="quote">
          <div class="pill">
            <div class="big">ETH: <span id="ethUsd">—</span></div>
            <div class="sub">Weekly high: <span id="ethWeekHigh">—</span></div>
          </div>
          <div class="pill">
            <div class="big">Quote refresh: <span id="quoteCountdown">—</span></div>
            <div class="sub"><button class="btn" style="padding:8px 10px;border-radius:12px;font-weight:800" id="retryQuote">Retry</button></div>
          </div>
        </div>
      </header>

      <main class="views">
        <!-- HOME -->
        <section class="view active" id="view-home">
          <div class="hero glass">
            <div>
              <div class="kicker">Stop trading. Start printing.</div>
              <h1>Stop trading.<br/>Start printing.</h1>
              <p class="lead">Pick an exploit. Pay in ETH. Get delivery.</p>

              <div class="actions">
                <button class="btn gold" id="goExploits">Browse exploits</button>
                <button class="btn ghost" id="goTerms">Read terms</button>
              </div>
            </div>

            <div class="rightCard glass soft">
              <div class="statRow">
                <div class="stat">
                  <div class="k">Pricing basis</div>
                  <div class="v"><span class="gold">Weekly High</span> (7D)</div>
                </div>
                <div class="stat">
                  <div class="k">Refresh</div>
                  <div class="v">Every <span class="gold">10 min</span></div>
                </div>
              </div>

              <div class="statRow">
                <div class="stat">
                  <div class="k">Delivery</div>
                  <div class="v">Email link</div>
                </div>
                <div class="stat">
                  <div class="k">Checkout</div>
                  <div class="v">QR + Address</div>
                </div>
              </div>

              <div class="stat" style="margin-top:10px">
                <div class="k">Signal</div>
                <div class="v">Low text · High intent</div>
              </div>
            </div>
          </div>

          <div class="grid" style="margin-top:16px">
            <div class="card glass soft">
              <div class="priceRow">
                <h3>Glitch 1.0 — Simple Sample</h3>
                <div class="usd">$50 <span>demo</span></div>
              </div>
              <div class="meta">
                <span class="chip">2 months</span>
                <span class="chip">1 trade at a time</span>
                <span class="chip">low noise</span>
              </div>
              <p class="mini">A calm baseline. One position. Minimal exposure.</p>
              <div class="actions" style="margin-top:auto">
                <button class="btn gold" data-open="g1">View</button>
                <button class="btn" data-checkout="g1">Checkout</button>
              </div>
            </div>

            <div class="card glass soft">
              <div class="priceRow">
                <h3>Glitch 2.0 — Wealth Builder</h3>
                <div class="usd">$70 <span>demo</span></div>
              </div>
              <div class="meta">
                <span class="chip">2 months</span>
                <span class="chip">dip re-entry</span>
                <span class="chip">measured recovery</span>
              </div>
              <p class="mini">Buy & hold with a second chance. Controlled recovery logic.</p>
              <div class="actions" style="margin-top:auto">
                <button class="btn gold" data-open="g2">View</button>
                <button class="btn" data-checkout="g2">Checkout</button>
              </div>
            </div>

            <div class="card glass soft">
              <div class="priceRow">
                <h3>Glitch PRO — F*ck Gold</h3>
                <div class="usd">$100 <span>lifetime</span></div>
              </div>
              <div class="meta">
                <span class="chip">one-time</span>
                <span class="chip">aggressive</span>
                <span class="chip">advanced recovery</span>
              </div>
              <p class="mini">Higher tempo. More tools. More responsibility.</p>
              <div class="actions" style="margin-top:auto">
                <button class="btn gold" data-open="g3">View</button>
                <button class="btn" data-checkout="g3">Checkout</button>
              </div>
            </div>
          </div>
        </section>

        <!-- EXPLOITS -->
        <section class="view" id="view-exploits">
          <div class="glass" style="padding:18px">
            <div class="kicker">Pick fast. Pay clean. Receive.</div>
            <h2 style="margin:10px 0 0; font-size:22px">Exploits</h2>
            <p class="lead" style="margin-top:8px">Select one. We’ll show the ETH due using the weekly high quote.</p>

            <div class="grid">
              <div class="card glass soft">
                <div class="priceRow">
                  <h3>Glitch 1.0 — Simple Sample</h3>
                  <div class="usd">$50</div>
                </div>
                <div class="meta">
                  <span class="chip">Demo · 2 months</span><span class="chip">1 trade</span>
                </div>
                <p class="mini">Best for: calm markets, low leverage, simple execution.</p>
                <div class="actions" style="margin-top:auto">
                  <button class="btn gold" data-open="g1">View</button>
                  <button class="btn" data-checkout="g1">Checkout</button>
                </div>
              </div>

              <div class="card glass soft">
                <div class="priceRow">
                  <h3>Glitch 2.0 — Wealth Builder</h3>
                  <div class="usd">$70</div>
                </div>
                <div class="meta">
                  <span class="chip">Demo · 2 months</span><span class="chip">re-entry</span>
                </div>
                <p class="mini">Best for: trend bias + controlled dip entries.</p>
                <div class="actions" style="margin-top:auto">
                  <button class="btn gold" data-open="g2">View</button>
                  <button class="btn" data-checkout="g2">Checkout</button>
                </div>
              </div>

              <div class="card glass soft">
                <div class="priceRow">
                  <h3>Glitch PRO — F*ck Gold</h3>
                  <div class="usd">$100</div>
                </div>
                <div class="meta">
                  <span class="chip">Lifetime</span><span class="chip">advanced</span>
                </div>
                <p class="mini">Best for: experienced operators. Higher risk tolerance.</p>
                <div class="actions" style="margin-top:auto">
                  <button class="btn gold" data-open="g3">View</button>
                  <button class="btn" data-checkout="g3">Checkout</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- TERMS -->
        <section class="view" id="view-terms">
          <div class="terms glass">
            <h2>Terms & Risk</h2>
            <p>
              Trading is <strong>high risk</strong>. You can lose <strong>all</strong> of your capital.
              Past performance does <strong>not</strong> guarantee future results.
            </p>
            <p>
              These digital products are delivered “as-is”. You are responsible for setup, operation,
              and compliance with your local laws. We do not provide investment advice.
            </p>
            <p>
              Demo licenses run for <strong>2 months</strong>. Pro is a <strong>one-time</strong> purchase.
              No refunds.
            </p>
            <p style="margin-top:12px; color:var(--muted2); font-size:12px">
              Quote basis: ETH amount is computed using the <strong>weekly high</strong> (7D) and refreshes every <strong>10 minutes</strong>.
            </p>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- MODAL -->
  <div class="overlay" id="overlay">
    <div class="modal glass" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalHeader">
        <div class="modalTitle" id="modalTitle">Exploit</div>
        <button class="close" id="closeModal">Close</button>
      </div>
      <div class="modalBody">
        <div class="box">
          <h4>Summary</h4>
          <p id="modalSummary">—</p>
        </div>

        <div class="checkoutGrid">
          <div class="box">
            <h4>ETH due (weekly high)</h4>
            <p style="margin-bottom:10px">
              USD price: <strong id="usdPrice">—</strong><br/>
              Weekly high (USD/ETH): <strong id="weeklyHigh">—</strong><br/>
              ETH due: <strong id="ethDue" style="color:var(--gold2)">—</strong>
            </p>
            <button class="btn gold" id="openCheckout">Checkout</button>
          </div>

          <div class="box" id="checkoutBox" style="display:none">
            <h4>Send ETH</h4>

            <div class="qrWrap">
              <img class="qr" id="walletImg" src="wallet.png" alt="Wallet QR"/>
              <div style="flex:1">
                <div style="font-size:12px;color:var(--muted2)">Address</div>
                <div class="addr" id="walletAddr">Loading…</div>
                <button class="copyBtn" id="copyAddr">Copy</button>
              </div>
            </div>

            <div style="height:10px"></div>

            <div class="payRow">
              <div class="field">
                <label>Email (delivery)</label>
                <input id="email" type="email" placeholder="you@domain.com" autocomplete="email"/>
              </div>
              <div class="field">
                <label>TxHash (optional for now)</label>
                <input id="tx" type="text" placeholder="0x…" autocomplete="off" spellcheck="false"/>
              </div>
            </div>

            <div style="height:10px"></div>

            <label class="check">
              <input id="agree" type="checkbox"/>
              <span>I agree to the Terms & acknowledge high risk.</span>
            </label>

            <div class="actions" style="margin-top:12px">
              <button class="btn gold" id="submit">Request delivery</button>
              <button class="btn" id="closeCheckout">Cancel</button>
            </div>

            <p style="margin:12px 0 0; font-size:12px; color:var(--muted2)">
              Note: In the next step we’ll verify TxHash on-chain and generate a time-limited download link.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">—</div>

  <script>
    // -----------------------------
    // Asset fallbacks (case-sensitive hosting)
    // -----------------------------
    (function(){
      const logo = document.getElementById("logoImg");
      logo.addEventListener("error", () => {
        if (logo.getAttribute("data-tried") === "1") return;
        logo.setAttribute("data-tried","1");
        logo.src = "Logo.png";
      });

      const wallet = document.getElementById("walletImg");
      wallet.addEventListener("error", () => {
        if (wallet.getAttribute("data-tried") === "1") return;
        wallet.setAttribute("data-tried","1");
        wallet.src = "Wallet.png";
      });
    })();

    // -----------------------------
    // Navigation (3 views)
    // -----------------------------
    const navButtons = Array.from(document.querySelectorAll("[data-nav]"));
    const views = {
      home: document.getElementById("view-home"),
      exploits: document.getElementById("view-exploits"),
      terms: document.getElementById("view-terms"),
    };

    function toast(msg){
      const t = document.getElementById("toast");
      t.textContent = msg;
      t.classList.add("show");
      clearTimeout(window.__toastT);
      window.__toastT = setTimeout(() => t.classList.remove("show"), 2400);
    }

    function setView(key){
      for (const [k, el] of Object.entries(views)){
        el.classList.toggle("active", k === key);
      }
      navButtons.forEach(b => b.classList.toggle("active", b.dataset.nav === key));
      history.replaceState({}, "", "#" + key);
    }

    navButtons.forEach(b => b.addEventListener("click", () => setView(b.dataset.nav)));
    document.getElementById("goExploits").addEventListener("click", () => setView("exploits"));
    document.getElementById("goTerms").addEventListener("click", () => setView("terms"));

    // hash routing
    (function(){
      const h = (location.hash || "").replace("#","");
      if (views[h]) setView(h);
    })();

    // -----------------------------
    // Exploit data
    // -----------------------------
    const exploits = {
      g1: {
        title: "Glitch 1.0 — Simple Sample",
        usd: 50,
        summary: "A calm baseline. One trade at a time. Best in smoother conditions where noise is low."
      },
      g2: {
        title: "Glitch 2.0 — Wealth Builder",
        usd: 70,
        summary: "Buy & hold bias with controlled dip re-entry. Designed for trend-friendly markets with pullbacks."
      },
      g3: {
        title: "Glitch PRO — F*ck Gold",
        usd: 100,
        summary: "Advanced recovery + higher tempo. Built for experienced operators. Higher risk profile."
      }
    };

    // -----------------------------
    // Modal + checkout
    // -----------------------------
    const overlay = document.getElementById("overlay");
    const modalTitle = document.getElementById("modalTitle");
    const modalSummary = document.getElementById("modalSummary");
    const usdPriceEl = document.getElementById("usdPrice");
    const weeklyHighEl = document.getElementById("weeklyHigh");
    const ethDueEl = document.getElementById("ethDue");
    const openCheckoutBtn = document.getElementById("openCheckout");
    const checkoutBox = document.getElementById("checkoutBox");
    const closeModalBtn = document.getElementById("closeModal");
    const closeCheckoutBtn = document.getElementById("closeCheckout");
    const submitBtn = document.getElementById("submit");

    let selectedKey = "g1";
    let quote = null;

    function showModal(){
      overlay.classList.add("show");
      checkoutBox.style.display = "none";
    }
    function hideModal(){
      overlay.classList.remove("show");
      checkoutBox.style.display = "none";
    }

    closeModalBtn.addEventListener("click", hideModal);
    overlay.addEventListener("click", (e) => { if (e.target === overlay) hideModal(); });

    function computeDueUSDToETH(usd){
      if (!quote || !quote.weeklyHighUsd) return null;
      const eth = usd / quote.weeklyHighUsd;
      return eth;
    }

    function renderModal(){
      const ex = exploits[selectedKey];
      modalTitle.textContent = ex.title;
      modalSummary.textContent = ex.summary;

      usdPriceEl.textContent = `$${ex.usd}`;
      weeklyHighEl.textContent = quote?.weeklyHighUsd ? `$${quote.weeklyHighUsd.toFixed(2)}` : "—";

      const due = computeDueUSDToETH(ex.usd);
      ethDueEl.textContent = due ? `${due.toFixed(6)} ETH` : "—";
    }

    function openExploit(key){
      selectedKey = key;
      renderModal();
      showModal();
    }

    function openCheckout(){
      checkoutBox.style.display = "block";
      loadAddress();
      // Keep the due updated if quote refreshed
      renderModal();
    }

    document.querySelectorAll("[data-open]").forEach(btn => {
      btn.addEventListener("click", () => openExploit(btn.dataset.open));
    });
    document.querySelectorAll("[data-checkout]").forEach(btn => {
      btn.addEventListener("click", () => {
        openExploit(btn.dataset.checkout);
        openCheckout();
      });
    });

    openCheckoutBtn.addEventListener("click", openCheckout);
    closeCheckoutBtn.addEventListener("click", () => checkoutBox.style.display = "none");

    document.getElementById("copyAddr").addEventListener("click", async () => {
      const addr = document.getElementById("walletAddr").textContent.trim();
      try{
        await navigator.clipboard.writeText(addr);
        toast("Address copied.");
      }catch{
        toast("Copy failed. Select & copy manually.");
      }
    });

    submitBtn.addEventListener("click", () => {
      const email = document.getElementById("email").value.trim();
      const agree = document.getElementById("agree").checked;

      if (!agree) return toast("Please accept the Terms.");
      if (!email || !email.includes("@")) return toast("Enter a valid email.");

      toast("Request saved. Next: on-chain verification + timed download link.");
      // TODO: next step (backend) -> POST /api/order
      checkoutBox.style.display = "none";
    });

    // -----------------------------
    // Address loader (address.txt)
    // -----------------------------
    async function loadAddress(){
      const el = document.getElementById("walletAddr");
      el.textContent = "Loading…";

      async function tryFetch(path){
        const r = await fetch(path, { cache: "no-store" });
        if (!r.ok) throw new Error("HTTP " + r.status);
        return (await r.text()).trim();
      }

      try{
        const addr = await tryFetch("/address.txt");
        el.textContent = addr;
      }catch(e1){
        try{
          const addr = await tryFetch("/Address.txt");
          el.textContent = addr;
        }catch(e2){
          el.textContent = "Address file not found. Ensure address.txt is in repo root.";
        }
      }
    }

    // -----------------------------
    // ETH Quote (10 min TTL)
    // -----------------------------
    const QUOTE_TTL_MS = 10 * 60 * 1000;
    const quoteEls = {
      usd: document.getElementById("ethUsd"),
      wh: document.getElementById("ethWeekHigh"),
      cd: document.getElementById("quoteCountdown")
    };

    function fmtMoney(n){
      if (!Number.isFinite(n)) return "—";
      return "$" + n.toFixed(2);
    }

    function tickCountdown(){
      if (!quote || !quote.refreshedAt) {
        quoteEls.cd.textContent = "—";
        return;
      }
      const next = quote.refreshedAt + QUOTE_TTL_MS;
      const ms = Math.max(0, next - Date.now());
      const m = Math.floor(ms / 60000);
      const s = Math.floor((ms % 60000) / 1000);
      quoteEls.cd.textContent = `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
      if (ms === 0) refreshQuote(true);
    }

    async function refreshQuote(force=false){
      try{
        const cacheKey = "egg_quote_v1";
        const cachedRaw = localStorage.getItem(cacheKey);
        if (!force && cachedRaw){
          const cached = JSON.parse(cachedRaw);
          if (cached && cached.refreshedAt && (Date.now() - cached.refreshedAt) < QUOTE_TTL_MS){
            quote = cached;
            renderQuote();
            renderModal();
            return;
          }
        }

        const r = await fetch("/api/eth", { cache: "no-store" });
        if (!r.ok) throw new Error("Quote HTTP " + r.status);
        const data = await r.json();
        if (!data || !data.ok) throw new Error("Bad quote payload");

        quote = data;
        localStorage.setItem(cacheKey, JSON.stringify(quote));
        renderQuote();
        renderModal();
      } catch (e){
        console.error("ETH quote failed:", e);
        quoteEls.usd.textContent = "—";
        quoteEls.wh.textContent = "—";
        quoteEls.cd.textContent = "offline";
      }
    }

    function renderQuote(){
      quoteEls.usd.textContent = fmtMoney(quote?.usd);
      quoteEls.wh.textContent = fmtMoney(quote?.weeklyHighUsd);
    }

    document.getElementById("retryQuote").addEventListener("click", () => refreshQuote(true));

    refreshQuote(true);
    setInterval(tickCountdown, 1000);

    // -----------------------------
    // GOLD DUST FX (interactive)
    // -----------------------------
    const canvas = document.getElementById("fx");
    const ctx = canvas.getContext("2d");

    let W = 0, H = 0, DPR = 1;
    function resize(){
      DPR = Math.min(2, window.devicePixelRatio || 1);
      W = Math.floor(window.innerWidth);
      H = Math.floor(window.innerHeight);
      canvas.width = Math.floor(W * DPR);
      canvas.height = Math.floor(H * DPR);
      canvas.style.width = W + "px";
      canvas.style.height = H + "px";
      ctx.setTransform(DPR,0,0,DPR,0,0);
    }
    window.addEventListener("resize", resize, { passive:true });
    resize();

    const pointer = { x: W*0.5, y: H*0.35, active:false };
    window.addEventListener("mousemove", (e)=>{ pointer.x=e.clientX; pointer.y=e.clientY; pointer.active=true; }, { passive:true });
    window.addEventListener("mouseleave", ()=>{ pointer.active=false; }, { passive:true });

    window.addEventListener("touchstart", (e)=> {
      const t = e.touches[0];
      if (!t) return;
      pointer.x = t.clientX; pointer.y = t.clientY; pointer.active = true;
      burst(pointer.x, pointer.y);
    }, { passive:true });

    window.addEventListener("touchmove", (e)=> {
      const t = e.touches[0];
      if (!t) return;
      pointer.x = t.clientX; pointer.y = t.clientY; pointer.active = true;
    }, { passive:true });

    window.addEventListener("click", (e)=> burst(e.clientX, e.clientY), { passive:true });

    const baseCount = Math.max(110, Math.min(220, Math.floor((W*H) / 12000)));
    const particles = [];
    function rand(a,b){ return a + Math.random()*(b-a); }

    function makeParticle(x=rand(0,W), y=rand(0,H), boost=false){
      const s = boost ? rand(1.6, 3.2) : rand(0.9, 2.4);
      return {
        x, y,
        vx: rand(-0.18, 0.18),
        vy: rand(-0.12, 0.12),
        r: s,
        tw: rand(0.6, 1.0),
        ph: rand(0, Math.PI*2),
        hue: rand(40, 52),  // gold-ish
        life: boost ? rand(240, 520) : 999999
      };
    }

    for (let i=0;i<baseCount;i++) particles.push(makeParticle());

    function burst(x,y){
      for (let i=0;i<14;i++){
        const p = makeParticle(x + rand(-18,18), y + rand(-18,18), true);
        p.vx += rand(-0.9, 0.9);
        p.vy += rand(-0.9, 0.9);
        particles.push(p);
      }
      toast("Gold dust spawned.");
    }

    function drawSpark(p, a){
      // tiny diamond “rock”
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.ph + (Date.now()*0.0003));
      ctx.beginPath();
      const r = p.r;
      ctx.moveTo(0, -r*1.3);
      ctx.lineTo(r*1.0, 0);
      ctx.lineTo(0, r*1.3);
      ctx.lineTo(-r*1.0, 0);
      ctx.closePath();

      ctx.fillStyle = `hsla(${p.hue}, 90%, 62%, ${a})`;
      ctx.fill();

      // highlight
      ctx.beginPath();
      ctx.arc(r*0.25, -r*0.25, r*0.35, 0, Math.PI*2);
      ctx.fillStyle = `rgba(255, 232, 170, ${a*0.55})`;
      ctx.fill();
      ctx.restore();
    }

    function step(){
      ctx.clearRect(0,0,W,H);

      // subtle fog
      const g = ctx.createRadialGradient(W*0.7, H*0.2, 0, W*0.7, H*0.2, Math.max(W,H)*0.95);
      g.addColorStop(0, "rgba(212,175,55,0.06)");
      g.addColorStop(1, "rgba(0,0,0,0)");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,W,H);

      // update + draw
      for (let i=0;i<particles.length;i++){
        const p = particles[i];
        p.ph += 0.006;

        // gentle drift
        p.vx += Math.sin(p.ph*0.9)*0.0006;
        p.vy += Math.cos(p.ph*0.8)*0.0006;

        // pointer repel
        if (pointer.active){
          const dx = p.x - pointer.x;
          const dy = p.y - pointer.y;
          const d2 = dx*dx + dy*dy;
          const R = 140;
          if (d2 < R*R){
            const d = Math.max(8, Math.sqrt(d2));
            const f = (1 - d/R) * 0.25;
            p.vx += (dx/d) * f;
            p.vy += (dy/d) * f;
          }
        }

        // clamp velocity
        p.vx *= 0.992;
        p.vy *= 0.992;

        p.x += p.vx;
        p.y += p.vy;

        // wrap
        if (p.x < -20) p.x = W + 20;
        if (p.x > W + 20) p.x = -20;
        if (p.y < -20) p.y = H + 20;
        if (p.y > H + 20) p.y = -20;

        if (p.life !== 999999){
          p.life -= 1;
          if (p.life <= 0){
            particles.splice(i,1);
            i--;
            continue;
          }
        }
      }

      // connections (light, only close neighbors; keeps it “present” but not ugly)
      for (let i=0;i<particles.length;i++){
        const a = particles[i];
        for (let j=i+1;j<particles.length;j++){
          const b = particles[j];
          const dx = a.x - b.x;
          const dy = a.y - b.y;
          const d2 = dx*dx + dy*dy;
          const max = 120;
          if (d2 < max*max){
            const d = Math.sqrt(d2);
            const alpha = (1 - d/max) * 0.10;
            ctx.strokeStyle = `rgba(212,175,55,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }

      // draw sparks on top
      for (const p of particles){
        const tw = (0.6 + 0.4*Math.sin(p.ph + Date.now()*0.002)) * p.tw;
        drawSpark(p, 0.55 * tw);
      }

      requestAnimationFrame(step);
    }
    step();
  </script>
</body>
</html>
